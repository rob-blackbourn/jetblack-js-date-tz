<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Date Arithmetic | @jetblack/date-tz</title><meta name="description" content="Documentation for @jetblack/date-tz"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../../assets/style.css"/><link rel="stylesheet" href="../../assets/highlight.css"/><script async src="../../assets/search.js" id="search-script"></script><link rel="stylesheet" href="../../assets/pages.css"/></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="../.."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../../index.html" class="title">@jetblack/date-tz</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../../modules.html">@jetblack/date-tz</a></li><li><span>Guides</span></li><li><a href="date-arithmetic.html">Date Arithmetic</a></li></ul><h1> Date Arithmetic</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#start-of-day" id="start-of-day" style="color: inherit; text-decoration: none;">
  <h2>Start of Day</h2>
</a>
<p>The start of the day depends on where you are in the world. Functions
like <a href="../../modules.html#startOfDay"><code>startOfDay</code></a>, <a href="../../modules.html#startOfMonth"><code>startOfMonth</code></a>, etc. all need to know
the timezone.</p>

<a href="#daylight-savings-time" id="daylight-savings-time" style="color: inherit; text-decoration: none;">
  <h2>Daylight Savings Time</h2>
</a>
<p>Daylight savings time (DST) presents an issue for date arithmetic.</p>
<p>The following example demonstrates how daylight savings time is handled.</p>
<pre><code class="language-js"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">DateTz</span><span class="hl-1">, </span><span class="hl-2">tzUtc</span><span class="hl-1">, </span><span class="hl-2">fetchTimezone</span><span class="hl-1">, </span><span class="hl-2">addDays</span><span class="hl-1">, </span><span class="hl-2">addHours</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@jetblack/date-tz&#39;</span><br/><br/><span class="hl-8">// In London on Sunday March 26 2000 the clocks went forward 1 hour at 1am.</span><br/><br/><span class="hl-8">// At midnight the clocks have yet to be put forward.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">tzLondon</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-6">fetchTimezone</span><span class="hl-1">(</span><span class="hl-3">&#39;Europe/London&#39;</span><span class="hl-1">)</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">mar26</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">DateTz</span><span class="hl-1">(</span><span class="hl-7">2000</span><span class="hl-1">, </span><span class="hl-7">2</span><span class="hl-1">, </span><span class="hl-7">26</span><span class="hl-1">, </span><span class="hl-2">tzLondon</span><span class="hl-1">)</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">mar26</span><span class="hl-1">.</span><span class="hl-6">toISOString</span><span class="hl-1">())</span><br/><span class="hl-8">// 2000-03-26T00:00:00+00:00</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">mar26</span><span class="hl-1">.</span><span class="hl-6">toISOString</span><span class="hl-1">())</span><br/><span class="hl-8">// 2000-03-26T00:00:00.000Z</span><br/><br/><span class="hl-8">// Adding one hour from midnight takes the time to 2am as the clocks go forward</span><br/><span class="hl-8">// one hour at 1am.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">mar26plus1h</span><span class="hl-1"> = </span><span class="hl-6">addHours</span><span class="hl-1">(</span><span class="hl-2">mar26</span><span class="hl-1">, </span><span class="hl-7">1</span><span class="hl-1">)</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">mar26plus1h</span><span class="hl-1">.</span><span class="hl-6">toISOString</span><span class="hl-1">())</span><br/><span class="hl-8">// 2000-03-26T02:00:00+01:00</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">mar26plus1h</span><span class="hl-1">.</span><span class="hl-6">as</span><span class="hl-1">(</span><span class="hl-2">tzUtc</span><span class="hl-1">).</span><span class="hl-6">toISOString</span><span class="hl-1">())</span><br/><span class="hl-8">// 2000-03-26T01:00:00.000Z</span><br/><br/><span class="hl-8">// Add a day in the context of the London time zone.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">mar27</span><span class="hl-1"> = </span><span class="hl-6">addDays</span><span class="hl-1">(</span><span class="hl-2">mar26</span><span class="hl-1">, </span><span class="hl-7">1</span><span class="hl-1">)</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">mar27</span><span class="hl-1">.</span><span class="hl-6">toISOString</span><span class="hl-1">())</span><br/><span class="hl-8">// 2000-03-27T00:00:00+01:00</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">mar27</span><span class="hl-1">.</span><span class="hl-6">as</span><span class="hl-1">(</span><span class="hl-2">tzUtc</span><span class="hl-1">).</span><span class="hl-6">toISOString</span><span class="hl-1">())</span><br/><span class="hl-8">// 2000-03-26T23:00:00.000Z</span><br/><br/><span class="hl-8">// There were only 23 hours in the day of the 26th.</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">millisInHour</span><span class="hl-1"> = </span><span class="hl-7">1000</span><span class="hl-1"> * </span><span class="hl-7">60</span><span class="hl-1"> * </span><span class="hl-7">60</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">hours26to27</span><span class="hl-1"> = (</span><span class="hl-2">mar27</span><span class="hl-1">.</span><span class="hl-6">getTime</span><span class="hl-1">() - </span><span class="hl-2">mar26</span><span class="hl-1">.</span><span class="hl-6">getTime</span><span class="hl-1">()) / </span><span class="hl-2">millisInHour</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">hours26to27</span><span class="hl-1">)</span><br/><span class="hl-8">// 23</span>
</code></pre>
<p>The London timezone is the same as UTC in the winter, but an hour ahead in the
summer. On the midnight of the day of the change London and UTC show the same
time. Adding an hour shows how the time leaps to 2am in London, but only 1am
in UTC. Adding a day and calculating the number of hours shows 23.</p>
<p>Keeping the time change constant (as with UTC) can be useful when plotting
data, or doing time series calculations (rolling averages, resampling, etc.).</p>

<a href="#date-schedules" id="date-schedules" style="color: inherit; text-decoration: none;">
  <h2>Date Schedules</h2>
</a>
<p>When generating date schedules (with <a href="../../modules.html#dateRangeByDay"><code>dateRangeByDay</code></a> for example),
the timezone is important both for the start of day, and for the daylight
savings change.</p>
<p>If what you really want is periods of constant milliseconds, you should use
tzUtc as it has no DST.</p>

<a href="#what-next-" id="what-next-" style="color: inherit; text-decoration: none;">
  <h2>What next ?</h2>
</a>
<p><a href="timezones.html">Timezones</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../../modules.html">Exports</a></li><li class="current pages-entry pages-entry-menu pages-entry-depth-0"><a>Guides</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="getting-started.html">Getting <wbr/>Started</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="general-usage.html">General <wbr/>Usage</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="design-choices.html">Design <wbr/>Choices</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="calculations.html">Calculations</a></li><li class="current pages-entry pages-entry-page pages-entry-depth-1"><a href="date-arithmetic.html">Date <wbr/>Arithmetic</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="timezones.html">Timezones</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="calendars.html">Calendars</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li><li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../../assets/main.js"></script></body></html>